# –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Ñ–æ—Ä—É–º–∞

–≠—Ç–æ—Ç —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ñ–æ—Ä—É–º–∞). –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∑–∞–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Å–æ–∑–¥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —É–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞

```

src/install/
‚îú‚îÄ‚îÄ defaults.yaml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∏—Å—Ö–æ–¥–Ω–∞—è)
‚îú‚îÄ‚îÄ install.php           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
‚îú‚îÄ‚îÄ step1.php             # –®–∞–≥ 1: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ step2.php             # –®–∞–≥ 2: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ step3.php             # –®–∞–≥ 3: —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ sql/                  # SQL-–¥–∞–º–ø—ã —Ç–∞–±–ª–∏—Ü
‚îÇ   ‚îú‚îÄ‚îÄ categories.sql
‚îÇ   ‚îú‚îÄ‚îÄ events.sql
‚îÇ   ‚îú‚îÄ‚îÄ groups.sql
‚îÇ   ‚îú‚îÄ‚îÄ roles.sql
‚îÇ   ‚îî‚îÄ‚îÄ users.sql
‚îî‚îÄ‚îÄ template/             # HTML-—à–∞–±–ª–æ–Ω—ã –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ footer.php
‚îú‚îÄ‚îÄ header.php
‚îî‚îÄ‚îÄ style.css

```

---

## ‚öôÔ∏è –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`step1.php`)

- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ `config.yaml`, –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∏–Ω–∞—á–µ ‚Äî –∏–∑ `defaults.yaml`.
- –ß–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (`DB_HOST`, `DB_USER`, `DB_PASS`, `DB_NAME`)
  - –ü—É—Ç–∏ (`WWW_ROOT`, `HTML_ROOT`)
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è `SYNC_PEERS`)
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —É–∑–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (`SYNC_PEERS`).
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ `config.yaml`.

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`step2.php`)

- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∑–∞–¥–∞–Ω–Ω—ã–µ –Ω–∞ —à–∞–≥–µ 1.
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
  - –ï—Å–ª–∏ –±–∞–∑–∞ **–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –µ—ë.
  - –ï—Å–ª–∏ –±–∞–∑–∞ **—Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –ø—É—Å—Ç–∞**, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã.
  - –ï—Å–ª–∏ –±–∞–∑–∞ **—Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–±–ª–∏—Ü—ã**, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –µ—ë —É–¥–∞–ª–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ.
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–º–ø–æ—Ä—Ç SQL-—Ñ–∞–π–ª–æ–≤ –ø–æ —Å–ø–∏—Å–∫—É: `events`, `categories`, `roles`, `groups`, `users`.

### 3. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (`step3.php`)

- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –ø–∞–ø–∫–∞ `install/` (–≤–∫–ª—é—á–∞—è –≤—Å–µ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏).
- –ï—Å–ª–∏ –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å, –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.

---

## üìå –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- PHP ‚â• 7.4
- PDO —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π MySQL
- –ö–ª–∞—Å—Å [`Spyc`](https://github.com/mustangostang/spyc) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ YAML (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø—É—Ç–∏ `../class/spyc.php`)

---

## üìù –í–∞–∂–Ω–æ

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `../include/config.yaml`.
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞—Ç–∞–ª–æ–≥ `install/` –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω. –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –≤—Ä—É—á–Ω—É—é.
- –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∑–∞—â–∏—â—ë–Ω –æ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã `INSTALL_ENTRY`.

---

## üöÄ –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```

http\://<–≤–∞—à\_–¥–æ–º–µ–Ω>/install/install.php

````

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

---

## üßπ –û—á–∏—Å—Ç–∫–∞

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –Ω–µ —É–¥–∞–ª–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:

```bash
rm -rf src/install/
````

---

## üìé –ü—Ä–∏–º–µ—Ä `defaults.yaml`

```yaml
database:
  DB_HOST: 
  DB_USER: 
  DB_PASS: 
  DB_NAME: 

paths:
  WWW_ROOT: "/var/www"
  HTML_ROOT: "/var/www/html"

sync:
  SYNC_API_KEY: 
  SYNC_SELF: 
  SYNC_DAYS_BACK: 3
  SYNC_EVENT_TYPES:
    - "UserCreated"
  SYNC_LOG_DIR: "../sync/log"
  SYNC_LOG_FILE: "../sync/log/sync.log"
  SYNC_ERROR_FILE: "../sync/log/sync_errors.log"
  SYNC_DEBUG: false
  SYNC_PEERS:
    alice:
      url: "http://172.17.0.1:8081"
      salt: "aliceSecretSalt123"
    bob:
      url: "http://172.17.0.1:8082"
      salt: "bobSecretSalt123"
```

---

## üßë‚Äçüíª –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã ‚Äî –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ç–µ–∫—É—â–µ–º—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø—Ä–æ–µ–∫—Ç–∞.

```
