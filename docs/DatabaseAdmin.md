# Faravel DatabaseAdmin — справочник и рекомендации по применению

**Компонент:** `Faravel\Database\DatabaseAdmin`  
**Назначение:** серверные операции с СУБД на этапе установки/утилит, когда контейнер приложения
ещё не поднят или когда нельзя полагаться на существование целевой БД.

> Почему отдельный класс?  
> Провайдер БД и `Faravel\Database\Database` ожидают, что база уже существует, т. к. они читают
> конфиг и открывают полноценное подключение к конкретной БД. На этапе «до БД»
> нужен «нулевой» помощник, который умеет подключаться **к серверу** (без имени
> базы) и выполнять `CREATE/DROP` и пр. серверные проверки.

---

## Когда использовать

Используйте `DatabaseAdmin`, если вам нужно:

1. **Проверить/создать/удалить** базу на этапе установки до boot приложения.
2. **Предварительно проверить подключение** (health check) в CI/CD.
3. **Подготовить окружение для мультитенантности** (создание базы на арендатора).
4. **Аварийные/сервисные утилиты**, которые работают без загрузки контейнера.

Когда **не** использовать:

- В обычных запросах/сервисах приложения, после boot контейнера.  
  Там используйте `Faravel\Database\Database` (через DI/Facade), миграции, сидеры и сервисы.

Поддерживаемые СУБД: **MySQL/MariaDB** и **PostgreSQL** (ограничения отмечены ниже).

---

## API (актуально для v0.4.x)

```php
<?php
use Faravel\Database\DatabaseAdmin;

// 1) Проверка существования базы
bool DatabaseAdmin::databaseExists(array $cfg);

// 2) Создать базу (если нет)
void DatabaseAdmin::createDatabaseIfNotExists(array $cfg);

// 3) Дропнуть базу (если есть)
//   ⚠ ОПАСНО: разрушительная операция, требует явного подтверждения в UI/CLI!
void DatabaseAdmin::dropDatabase(array $cfg);

// 4) Быстрое подключение к конкретной базе (проверка доступности)
bool DatabaseAdmin::canConnect(array $cfg);
